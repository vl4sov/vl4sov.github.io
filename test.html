
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="csrf-token" content="D50bCwPc3ObpJuqJGFZo0MFAm1sUlupndeSfOUDH">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolve-Rp.Ru - Играй в GTA San Andreas по сети!</title>
    <meta property="og:site_name" content="Evolve Role Play"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content=""/>
    <meta property="og:title" content="Evolve Role Play"/>
    <meta property="og:description" content="Evolve Role Play - Игровой сервер по игре Grand Theft Auto San Andreas на основе мультиплеера SA:MP"/>
    <meta name="description" content="Игровой сервер по игре Grand Theft Auto San Andreas на основе мультиплеера SA:MP"/>
    <meta name="keywords" content="evolverp, evolve, evolve samp, role play, roleplay, samp сервер, gta san andreas, gta samp"/>
    <link rel="icon" href="https://evolve-rp.ru/favicon.ico?v=2" type="image/x-icon" />
    <link rel="stylesheet" href="https://evolve-rp.ru/css/fonts.css?1">
    <link rel="stylesheet" href="https://evolve-rp.ru/css/evolve.css?26">
    <link rel="stylesheet" href="https://evolve-rp.ru/css/animate.css">
    <link rel="stylesheet" href="https://evolve-rp.ru/css/all.min.css">
    <link rel="stylesheet" href="https://evolve-rp.ru/css/loading-bar.min.css"/>
    <script src='https://evolve-rp.ru/js/engine/loading-bar.min.js'></script>
    <script src="https://evolve-rp.ru/js/engine/jquery.min.js"></script>
    <script src='https://evolve-rp.ru/js/engine/popper.min.js'></script>
    <script src="https://evolve-rp.ru/js/engine/bootstrap.js"></script>
    <script src="https://evolve-rp.ru/js/engine/wow.min.js"></script>
    <script src="https://evolve-rp.ru/js/engine/ui.js?3"></script>
    <script>
        new WOW().init();
    </script>
</head>
<body>
<div id="wrapper">
    <!-- NavMain Bootstrap 4 -->
    <div class="navMain--wrapper">
    <nav class="navbar navbar-expand-lg navMain">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navMainToggler"
                aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon">
                <img src="https://evolve-rp.ru/images/nav/burger.png" alt="" width = "100%">
            </span>
        </button>
        <div class="collapse navbar-collapse" id="navMainToggler">
            <a class="navbar-brand" href="https://evolve-rp.ru">
                <img
                        src="https://evolve-rp.ru/images/nav/logo.png"
                        alt="evolve role play logo png"
                >
            </a>
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0 flex-grow-1 justify-content-center">
                <li class="nav-item">
                    <a class="nav-link" href="https://evolve-rp.ru/login/">Главная</a>
                    <div class="nav-item-hover" style="opacity: 0;">
                        <div class="nav-item-hover-circle"></div>
                        <div class="nav-item-hover-circle"></div>
                        <div class="nav-item-hover-circle"></div>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://evolve-rp.ru/login/admin/logs">Выписка</a>
                    <div class="nav-item-hover" style="opacity: 0;">
                        <div class="nav-item-hover-circle"></div>
                        <div class="nav-item-hover-circle"></div>
                        <div class="nav-item-hover-circle"></div>
                    </div>
                </li>
            </ul>
            <ul class="my-2 my-lg-0">
                <li class="nav-item nav-item-ucp">
                    <a class="nav-link" href="https://evolve-rp.su/">На форум</a>
                </li>
            </ul>
        </div>
    </nav>
    </div>
    <!-- NavMain Bootstrap 4 end -->
    <div class="ucp--wrapper" style="min-height: 1128px;">
        <div class="ucp--content">
		<div class="col-sm office1 bf-3 bg-white text-center">
		<div class="p-4">
			<h3 class="pt-3 pb-2 font-weight-bold">Общее логирование</h3>
			<p><input type="text" id="username" placeholder="Кто блатил?" style="text-align: center;"/></p><p><button class="btn btn-evolve4" id="get_fraction_data">Получение данных</button></p>
			<p><input type="text" id="username2" placeholder="Кого блатили?" style="text-align: center;" /></p><p><button class="btn btn-evolve4" id="get_fraction_data2">Получение данных</button></p>
		</div>
	</div>
		</div>
</div>
<section class="auth-warning" style="display:none;">
		<div class="auth-warning-window" style="height: unset; padding: 20px;">
				<img src="https://evolve-rp.ru/images/ucp/login/warning-window-close.png" alt="">
				<h2></h2>
				<p></p>
		</div>
</section>

	<script>

		function download(content, fileName, contentType) {
				var a = document.createElement("a");
				var file = new Blob([content], {type: contentType});
				a.href = URL.createObjectURL(file);
				a.download = fileName;
				a.click();
		}

		$('#get_fraction_data').one('click', function (event) {
			event.preventDefault();
			let bres = "";
			if($('#username').val() != "") {
		    $.ajax({
		      type: 'POST',
		      url: 'https://evolve-rp.ru/login/admin/logs/api_srv/105/api_admin/get_info_20',
		      dataType: 'JSON',
		      data: {
		         _token: $('meta[name="csrf-token"]').attr('content'),
		        value_1: $('#username').val()
		      },
		      success: function(data) {
					let tpl = "";
					switch(data) {
					case 0: bres = 'Одно из полей формы, является незаполненым, пожалуйста исправьте данное недоразумение'; break;
					case 1: bres = 'Вы не можете получить доступ к информации, необходимо быть администратором'; break;
					case 2: bres = 'Вы не можете получить доступ к данной информации, необходимо иметь уровень доступа +5'; break;
					}
					if(parseInt(data) != 0 && parseInt(data) != 1 && parseInt(data) != 2) {
						bres = "Начинается загрузка информации...";
						$('.auth-warning').fadeIn(1000);
						$('.auth-warning-window h2').html('Логи');
						$('.auth-warning-window p').html(bres);
						console.log(data);
						if(data['InviteToFraction'] || data['SetRank']) {
							let fare_count = 0;
							if(data['InviteToFraction'] && data['SetRank']) {
								fare_count = data['InviteToFraction'].length + data['SetRank'].length;
							} else if(data['InviteToFraction']) {
								fare_count = data['InviteToFraction'].length;
							} else if(data['SetRank']) {
								fare_count = data['SetRank'].length;
							}
							for(let i = 0; i < fare_count; i++) {
								if(data['InviteToFraction']) {
									if(data['InviteToFraction'][i]) {
										tpl += `${data['InviteToFraction'][i].Name} пригласил во фракцию игрока ${data['InviteToFraction'][i].paramsName}. [Фракция: ${data['InviteToFraction'][i].Value}] [Дата: ${data['InviteToFraction'][i].Date}]\n`;
									}
								}
								if(data['SetRank']) {
									if(data['SetRank'][i]) {
										tpl += `${data['SetRank'][i].Name} изменил ранг игроку ${data['SetRank'][i].paramsName}. [Ранг: ${data['SetRank'][i].Value}] [Дата: ${data['SetRank'][i].Date}]\n`;
									}
								}
							}
						} else {
							tpl = "Информация отсутствует";
						}
						var d = new Date();
						var curr_date = d.getDate(); var curr_month = d.getMonth() + 1; var curr_year = d.getFullYear();
						var curr_hour = d.getHours(); var curr_mins = d.getMinutes(); var curr_sec = d.getSeconds();
						download(tpl, `evolve_admlogs_${curr_year}_${curr_month}_${curr_date}-${curr_hour}_${curr_mins}_${curr_sec}.txt`, 'text/plain');
					} else {
						bres = "Сервер вернул некорретный ответ... Попробуйте снова";
						$('.auth-warning').fadeIn(1000);
						$('.auth-warning-window h2').html('Логи');
						$('.auth-warning-window p').html(bres);
					}
		      }
		    });
		  } else {
		    bres = 'Необходимо заполнить все нужные поля формы';
				$('.auth-warning').fadeIn(1000);
        $('.auth-warning-window h2').html('Логи');
        $('.auth-warning-window p').html(bres);
		  }
		});

		$('#get_fraction_data2').one('click', function (event) {
			event.preventDefault();
			let bres = "";
			if($('#username2').val() != "") {
		    $.ajax({
		      type: 'POST',
		      url: 'https://evolve-rp.ru/login/admin/logs/api_admin/get_info_21',
		      dataType: 'JSON',
		      data: {
		         _token: $('meta[name="csrf-token"]').attr('content'),
		        value_1: $('#username2').val()
		      },
		      success: function(data) {
						console.log(data);
						let tpl = "";
		        switch(data) {
		          case 0: bres = 'Одно из полей формы, является незаполненым, пожалуйста исправьте данное недоразумение'; break;
		          case 1: bres = 'Вы не можете получить доступ к информации, необходимо быть администратором'; break;
		          case 2: bres = 'Вы не можете получить доступ к данной информации, необходимо иметь уровень доступа +5'; break;
		        }
						if(parseInt(data) != 0 && parseInt(data) != 1 && parseInt(data) != 2) {
							bres = "Начинается загрузка информации...";
							$('.auth-warning').fadeIn(1000);
							$('.auth-warning-window h2').html('Логи');
							$('.auth-warning-window p').html(bres);
							if(data['InviteToFraction'] || data['SetRank']) {
								let fare_count = 0;
								if(data['InviteToFraction'] && data['SetRank']) {
									fare_count = data['InviteToFraction'].length + data['SetRank'].length;
								} else if(data['InviteToFraction']) {
									fare_count = data['InviteToFraction'].length;
								} else if(data['SetRank']) {
									fare_count = data['SetRank'].length;
								}
								for(let i = 0; i < fare_count; i++) {
									if(data['InviteToFraction']) {
										if(data['InviteToFraction'][i]) {
											tpl += `${data['InviteToFraction'][i].Name} пригласил во фракцию игрока ${data['InviteToFraction'][i].paramsName}. [Фракция: ${data['InviteToFraction'][i].Value}] [Дата: ${data['InviteToFraction'][i].Date}]\n`;
										}
									}
									if(data['SetRank']) {
										if(data['SetRank'][i]) {
											tpl += `${data['SetRank'][i].Name} изменил ранг игроку ${data['SetRank'][i].paramsName}. [Ранг: ${data['SetRank'][i].Value}] [Дата: ${data['SetRank'][i].Date}]\n`;
										}
									}
								}
							} else {
								tpl = "Информация отсутствует";
							}
							var d = new Date();
							var curr_date = d.getDate(); var curr_month = d.getMonth() + 1; var curr_year = d.getFullYear();
							var curr_hour = d.getHours(); var curr_mins = d.getMinutes(); var curr_sec = d.getSeconds();
							download(tpl, `evolve_admlogs_${curr_year}_${curr_month}_${curr_date}-${curr_hour}_${curr_mins}_${curr_sec}.txt`, 'text/plain');
						} else {
							bres = "Сервер вернул некорретный ответ... Попробуйте снова";
							$('.auth-warning').fadeIn(1000);
							$('.auth-warning-window h2').html('Логи');
							$('.auth-warning-window p').html(bres);
						}
		      }
		    });
		  } else {
		    bres = 'Необходимо заполнить все нужные поля формы';
				$('.auth-warning').fadeIn(1000);
        $('.auth-warning-window h2').html('Логи');
        $('.auth-warning-window p').html(bres);
		  }
		});

		$('#add_news').one('click', function (event) {
			event.preventDefault();
			let bres = "";
			if($('#heading_news').val() != "") {
		    $.ajax({
		      type: 'POST',
		      url: 'https://evolve-rp.ru/login/admin/logs/api_srv/105',
		      dataType: 'JSON',
		      data: {
				 _token: $('meta[name="csrf-token"]').attr('content'),
				value_1: $('#heading_news').val(),
				value_2: $('#summernote').val()
		      },
		      success: function(data) {
				console.log(data);
				let tpl = "";
		        switch(data) {
		          case 0: bres = 'Одно из полей формы, является незаполненым, пожалуйста исправьте данное недоразумение'; break;
		          case 1: bres = 'Вы не можете получить доступ к информации, необходимо быть администратором'; break;
				  case 2: bres = 'Вы не можете получить доступ к данной информации, необходимо иметь уровень доступа +7'; break;
				  case 3: bres = 'Новость успешна опубликована'; break;
				}
				$('.auth-warning').fadeIn(1000);
				$('.auth-warning-window h2').html('Новости');
				$('.auth-warning-window p').html(bres);
		      }
		    });
		  } else {
		    bres = 'Необходимо заполнить все нужные поля формы';
			$('.auth-warning').fadeIn(1000);
			$('.auth-warning-window h2').html('Новости');
			$('.auth-warning-window p').html(bres);
		  }
		});

		$('#select_news').one('click', function (event) {
			let selid = $("#actual_news option:selected").val();
			window.location.href = `https://evolve-rp.ru/login/admin/news/edit/${selid}`;
		});

		$('#edit_news').one('click', function (event) {
			event.preventDefault();
			let bres = "";
			if($('#heading_news').val() != "") {
		    $.ajax({
		      type: 'POST',
		      url: 'https://evolve-rp.ru/login/admin/logs/api_srv/105/api_srv/106',
		      dataType: 'JSON',
		      data: {
				 _token: $('meta[name="csrf-token"]').attr('content'),
				value_1: $('#heading_news').val(),
				value_2: $('#summernote').val(),
				value_3: $('#news_id').val()
		      },
		      success: function(data) {
				console.log(data);
				let tpl = "";
		        switch(data) {
		          case 0: bres = 'Одно из полей формы, является незаполненым, пожалуйста исправьте данное недоразумение'; break;
		          case 1: bres = 'Вы не можете получить доступ к информации, необходимо быть администратором'; break;
				  case 2: bres = 'Вы не можете получить доступ к данной информации, необходимо иметь уровень доступа +7'; break;
				  case 3: bres = 'Новость успешна отредактирована'; break;
				}
				$('.auth-warning').fadeIn(1000);
				$('.auth-warning-window h2').html('Новости');
				$('.auth-warning-window p').html(bres);
		      }
		    });
		  } else {
		    bres = 'Необходимо заполнить все нужные поля формы';
			$('.auth-warning').fadeIn(1000);
			$('.auth-warning-window h2').html('Новости');
			$('.auth-warning-window p').html(bres);
		  }
		});

		$('#delete_news').one('click', function (event) {
			event.preventDefault();
			let bres = "";
			if($('#heading_news').val() != "") {
		    $.ajax({
		      type: 'POST',
		      url: 'https://evolve-rp.ru/login/admin/logs/api_srv/105/api_srv/107',
		      dataType: 'JSON',
		      data: {
				 _token: $('meta[name="csrf-token"]').attr('content'),
				value_1: $('#news_id').val()
		      },
		      success: function(data) {
				console.log(data);
				let tpl = "";
		        switch(data) {
		          case 0: bres = 'Одно из полей формы, является незаполненым, пожалуйста исправьте данное недоразумение'; break;
		          case 1: bres = 'Вы не можете получить доступ к информации, необходимо быть администратором'; break;
				  case 2: bres = 'Вы не можете получить доступ к данной информации, необходимо иметь уровень доступа +7'; break;
				  case 3: bres = 'Новость успешна удалена'; break;
				}
				$('.auth-warning').fadeIn(1000);
				$('.auth-warning-window h2').html('Новости');
				$('.auth-warning-window p').html(bres);
		      }
		    });
		  } else {
		    bres = 'Необходимо заполнить все нужные поля формы';
			$('.auth-warning').fadeIn(1000);
			$('.auth-warning-window h2').html('Новости');
			$('.auth-warning-window p').html(bres);
		  }
		});
		

	</script>
    <div class="footer--wrapper">
    <footer class="footerMain">
        <div class="footerMain--content">
            <p class="footerMain--content__copy">
                                Developed by Evolve Team 2017-2021 <br />
            </p>
            <div class="footerMain--content__links">
                                 <a href="https://evolve-rp.ru/login/admin/main">Администрирование</a> 
                <a href="https://vk.com/rizakov21">Сотрудничество</a>
                <a href="#">Вакансии</a>
                <a href="https://evolve-rp.ru/documents">Документы</a>
                <a href="https://evolve-rp.ru/contacts">Контакты</a>
            </div>
        </div>
        <div class="footerMain--copy">
            <p>www.evolve-rp.ru</p>
        </div>
    </footer>
</div>
</div>
</body>
</html>
